<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nobulem â€” Executors</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/NdNpCJ4v/image-2.png">
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --bg-color: #040205;
            --text-main: #ffffff;
            --text-muted: rgba(255, 255, 255, 0.6);
            --primary-purple: #c084fc;
            --primary-green: #4ade80;
            --primary-red: #f87171;
            --glass-border: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(13, 13, 13, 0.6);
            --font-display: 'Poppins', sans-serif;
            --font-body: 'DM Sans', sans-serif;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: var(--bg-color); color: var(--text-main); font-family: var(--font-body); overflow-x: hidden; min-height: 100vh; display: flex; flex-direction: column; align-items: center; }
        a { text-decoration: none; color: inherit; transition: 0.3s; }

        .bg-glow { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100vw; height: 100vh; background: radial-gradient(circle at 15% 50%, rgba(76, 29, 149, 0.15), transparent 40%), radial-gradient(circle at 85% 30%, rgba(192, 132, 252, 0.1), transparent 40%); z-index: -2; pointer-events: none; }
        .stars { position: fixed; inset: 0; background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='10' cy='10' r='1' fill='rgba(255,255,255,0.15)'/%3E%3C/svg%3E"); z-index: -1; opacity: 0.5; }

        /* Navigation - Standardized across all pages */
        .nav-wrapper { position: fixed; top: 24px; z-index: 100; width: 100%; display: flex; justify-content: center; padding: 0 20px; }
        .nav-island { display: flex; align-items: center; background: var(--glass-bg); backdrop-filter: blur(16px); border: 1px solid var(--glass-border); padding: 8px 12px; border-radius: 16px; gap: 20px; max-width: 1100px; width: 100%; }
        .brand { display: flex; align-items: center; gap: 10px; padding-right: 20px; border-right: 1px solid var(--glass-border); cursor: pointer; }
        .brand img { width: 32px; height: 32px; border-radius: 8px; }
        .brand span { font-family: var(--font-display); font-weight: 600; font-size: 16px; }
        .nav-links { display: flex; gap: 4px; flex-grow: 1; justify-content: center; }
        .nav-link { font-size: 13px; font-weight: 500; color: var(--text-muted); padding: 8px 14px; border-radius: 10px; }
        .nav-link:hover, .nav-link.active { color: white; background: rgba(255, 255, 255, 0.08); }
        .nav-cta { background: #5865F2; color: white; padding: 8px 16px; border-radius: 10px; font-size: 13px; font-weight: 600; display: flex; align-items: center; gap: 8px; }
        .mobile-toggle { display: none; cursor: pointer; color: white; margin-left: auto; }

        .hero { text-align: center; padding: 160px 20px 60px; max-width: 1000px; }
        .hero h1 { font-family: var(--font-display); font-size: clamp(40px, 5vw, 64px); line-height: 1.1; margin-bottom: 20px; background: linear-gradient(180deg, #fff 0%, rgba(255,255,255,0.7) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { color: var(--text-muted); font-size: 16px; max-width: 600px; margin: 0 auto 40px; }

        .versions-wrapper { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; margin-bottom: 40px; }
        .version-pill { display: flex; align-items: center; gap: 12px; background: rgba(255,255,255,0.05); padding: 12px 24px; border-radius: 50px; border: 1px solid var(--glass-border); }
        .version-icon { color: var(--text-muted); }
        .version-data { display: flex; flex-direction: column; text-align: left; }
        .v-label { font-size: 10px; text-transform: uppercase; color: var(--text-muted); font-weight: 700; }
        .v-num { font-family: monospace; font-size: 14px; font-weight: 600; color: var(--primary-purple); }

        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; width: 100%; max-width: 1000px; margin-bottom: 40px; }
        .stat-card { background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); border-radius: 16px; padding: 20px; text-align: center; }
        .stat-val { font-size: 32px; font-weight: 700; color: white; display: block; font-family: var(--font-display); }
        .stat-lbl { font-size: 12px; color: var(--text-muted); text-transform: uppercase; letter-spacing: 1px; }

        .platform-switch { display: flex; justify-content: center; background: rgba(255,255,255,0.05); padding: 4px; border-radius: 12px; margin: 0 auto 40px; max-width: fit-content; }
        .p-btn { background: transparent; border: none; color: var(--text-muted); padding: 10px 24px; border-radius: 8px; cursor: pointer; font-weight: 600; font-family: var(--font-body); transition: 0.3s; display: flex; align-items: center; gap: 8px; }
        .p-btn.active { background: rgba(255,255,255,0.1); color: white; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
        .p-btn:hover:not(.active) { color: white; }

        .exec-list { display: flex; flex-direction: column; gap: 16px; width: 100%; max-width: 1000px; padding-bottom: 80px; }
        .exec-item { background: rgba(15, 10, 20, 0.4); border: 1px solid var(--glass-border); border-radius: 16px; padding: 24px; display: flex; justify-content: space-between; align-items: center; transition: 0.3s; cursor: pointer; position: relative; overflow: hidden; }
        .exec-item:hover { transform: translateY(-2px); border-color: rgba(255,255,255,0.2); background: rgba(255,255,255,0.05); }
        
        .exec-item::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: var(--glass-border); }
        .exec-item.working::before { background: var(--primary-green); box-shadow: 0 0 10px var(--primary-green); }
        .exec-item.down::before { background: var(--primary-red); box-shadow: 0 0 10px var(--primary-red); }

        .exec-info h3 { font-family: var(--font-display); font-size: 18px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; }
        .badges { display: flex; gap: 8px; flex-wrap: wrap; }
        .badge { font-size: 11px; padding: 4px 10px; border-radius: 6px; background: rgba(255,255,255,0.1); font-weight: 600; }
        .badge.unc { background: rgba(192, 132, 252, 0.15); color: #d8b4fe; border: 1px solid rgba(192, 132, 252, 0.3); }
        .badge.free { background: rgba(74, 222, 128, 0.15); color: #86efac; border: 1px solid rgba(74, 222, 128, 0.3); }
        .badge.paid { background: rgba(96, 165, 250, 0.15); color: #93c5fd; border: 1px solid rgba(96, 165, 250, 0.3); }

        .exec-meta { text-align: right; }
        .status-pill { display: inline-block; padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 700; margin-bottom: 6px; }
        .status-pill.working { background: var(--primary-green); color: black; }
        .status-pill.down { background: var(--primary-red); color: black; }
        .updated-time { font-size: 12px; color: var(--text-muted); display: block; }

        .loader { text-align: center; color: var(--text-muted); padding: 40px; }

        /* Mobile Responsive Improvements */
        @media (max-width: 900px) {
            .nav-links { 
                display: none; 
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--glass-bg);
                backdrop-filter: blur(20px);
                border: 1px solid var(--glass-border);
                border-radius: 16px;
                padding: 20px;
                margin-top: 10px;
                flex-direction: column;
                gap: 10px;
                z-index: 1000;
            }
            .nav-links.active {
                display: flex;
            }
            .mobile-toggle { display: block; }
            .exec-item { flex-direction: column; align-items: flex-start; gap: 16px; }
            .exec-meta { text-align: left; width: 100%; }
            .hero { padding: 140px 20px 40px; }
            .hero h1 { font-size: 36px; }
            .versions-wrapper { flex-direction: column; align-items: center; }
            .version-pill { width: 100%; max-width: 300px; }
            .status-grid { grid-template-columns: 1fr; }
            .platform-switch { flex-direction: column; width: 100%; max-width: 300px; }
            .p-btn { justify-content: center; }
            .nav-island { flex-wrap: wrap; justify-content: space-between; }
            .nav-cta { order: 3; width: 100%; margin-top: 10px; justify-content: center; }
        }

        @media (max-width: 480px) {
            .hero { padding: 120px 15px 30px; }
            .hero h1 { font-size: 32px; }
            .exec-item { padding: 20px; }
            .exec-info h3 { flex-direction: column; align-items: flex-start; gap: 8px; }
            .badges { width: 100%; }
            .nav-island { padding: 10px; }
            .brand { padding-right: 15px; }
            .brand span { font-size: 14px; }
        }

        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body>
    <div class="bg-glow"></div>
    <div class="stars"></div>

    <div class="nav-wrapper">
        <nav class="nav-island">
            <div class="brand" onclick="window.location.href='/'">
                <img src="https://i.ibb.co/9HfPQdpj/output-onlinepngtools-2.png" alt="Logo">
                <span>nobulem.wtf</span>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link">Home</a>
                <a href="/executors" class="nav-link active">Executors</a>
                <a href="/games" class="nav-link">Games & Scripts</a>
                <a href="/showcases" class="nav-link">Showcases</a>
                <a href="/pricing" class="nav-link">Pricing</a>
                <a href="/developers" class="nav-link">Developers</a>
                <a href="/tos" class="nav-link">Terms</a>
            </div>
            <a href="https://discord.gg/ExH98C3uFH" class="nav-cta"><i data-lucide="message-circle" width="16"></i> Discord</a>
            <div class="mobile-toggle"><i data-lucide="menu"></i></div>
        </nav>
    </div>

    <div class="hero">
        <h1>Executor Status</h1>
        <p class="subtitle">Live tracking of Roblox executors. Data powered by WEAO API.</p>
        
        <div class="versions-wrapper">
            <div class="version-pill">
                <i data-lucide="monitor" class="version-icon"></i>
                <div class="version-data">
                    <span class="v-label">Windows Ver</span>
                    <span class="v-num" id="winVersion">Loading...</span>
                </div>
            </div>
            <div class="version-pill">
                <i data-lucide="laptop" class="version-icon"></i>
                <div class="version-data">
                    <span class="v-label">Mac Ver</span>
                    <span class="v-num" id="macVersion">Loading...</span>
                </div>
            </div>
        </div>

        <div class="status-grid">
            <div class="stat-card">
                <span class="stat-val" id="statsTotal">-</span>
                <span class="stat-lbl">Tracked</span>
            </div>
            <div class="stat-card">
                <span class="stat-val" id="statsWorking" style="color: var(--primary-green)">-</span>
                <span class="stat-lbl">Working</span>
            </div>
            <div class="stat-card">
                <span class="stat-val" id="statsUNC" style="color: var(--primary-purple)">-</span>
                <span class="stat-lbl">Avg UNC</span>
            </div>
        </div>

        <div class="platform-switch">
            <button class="p-btn active" onclick="switchPlatform('windows')" data-platform="windows"><i data-lucide="monitor"></i> Windows</button>
            <button class="p-btn" onclick="switchPlatform('mac')" data-platform="mac"><i data-lucide="apple"></i> Mac</button>
            <button class="p-btn" onclick="switchPlatform('mobile')" data-platform="mobile"><i data-lucide="smartphone"></i> Mobile</button>
        </div>

        <div class="exec-list" id="executorGrid">
            <div class="loader"><i data-lucide="loader-2" class="animate-spin"></i> Fetching API Data...</div>
        </div>
    </div>

    <script>
        lucide.createIcons();
        
        // Mobile menu toggle
        const mobileToggle = document.querySelector('.mobile-toggle');
        const navLinks = document.querySelector('.nav-links');
        
        mobileToggle.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            mobileToggle.innerHTML = navLinks.classList.contains('active') 
                ? '<i data-lucide="x"></i>' 
                : '<i data-lucide="menu"></i>';
            lucide.createIcons();
        });
        
        // Close mobile menu when clicking a link
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', () => {
                navLinks.classList.remove('active');
                mobileToggle.innerHTML = '<i data-lucide="menu"></i>';
                lucide.createIcons();
            });
        });
        
        // Using dedicated WEAO proxy
        const PROXY_BASE = 'http://farts.fadedis.xyz:25551/api';
        
        let allExecutors = [];
        let currentPlatform = 'windows';
        
        const ALLOWED_EXECUTORS = [
            'bunni.lol', 'swift', 'potassium', 'wave', 'volcano', 'valex', 
            'delta', 'codex', 'cryptic', 'hydrogen', 'macsploit', 'seliware', 
            'chocosploit'
        ];

        async function fetchData() {
            try {
                // Fetch Roblox versions
                console.log('Fetching versions from:', PROXY_BASE + '/versions/current');
                const versionResponse = await fetch(PROXY_BASE + '/versions/current');
                
                if (!versionResponse.ok) {
                    throw new Error(`Version fetch failed: ${versionResponse.status}`);
                }
                
                const versions = await versionResponse.json();
                console.log('Versions loaded:', versions);
                
                document.getElementById('winVersion').textContent = versions.Windows || 'N/A';
                document.getElementById('macVersion').textContent = versions.Mac || 'N/A';

                // Fetch executor data
                console.log('Fetching exploits from:', PROXY_BASE + '/status/exploits');
                const exploitResponse = await fetch(PROXY_BASE + '/status/exploits');
                
                if (!exploitResponse.ok) {
                    throw new Error(`Exploit fetch failed: ${exploitResponse.status}`);
                }
                
                const exploits = await exploitResponse.json();
                console.log('Exploits loaded:', exploits.length);
                
                if (!Array.isArray(exploits)) {
                    throw new Error('Invalid API response format');
                }
                
                // Filter for allowed executors
                allExecutors = exploits.filter(ex => 
                    ex && ex.title && ALLOWED_EXECUTORS.includes(ex.title.toLowerCase())
                );
                
                console.log(`Filtered ${allExecutors.length} allowed executors`);
                
                updateStats(allExecutors);
                renderExecutors();
                
            } catch (error) {
                console.error('API Error:', error);
                document.getElementById('executorGrid').innerHTML = `
                    <div style="padding:40px; text-align:center; color:#f87171; background: rgba(248, 113, 113, 0.1); border-radius: 12px; border: 1px solid rgba(248, 113, 113, 0.3);">
                        <i data-lucide="alert-circle" style="width: 48px; height: 48px; margin-bottom: 16px;"></i>
                        <h3 style="margin-bottom: 8px;">Failed to Load Data</h3>
                        <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 12px;">
                            Unable to fetch from WEAO API. Please try again later.
                        </p>
                        <button onclick="fetchData()" style="padding: 10px 20px; background: #5865F2; border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: 600;">
                            Retry
                        </button>
                    </div>
                `;
                lucide.createIcons();
            }
        }

        function updateStats(data) {
            document.getElementById('statsTotal').textContent = data.length;
            
            const working = data.filter(e => e.updateStatus === true).length;
            document.getElementById('statsWorking').textContent = working;
            
            // Calculate average UNC
            const uncValues = data
                .map(e => e.uncPercentage || 0)
                .filter(u => u > 0);
            
            const avgUNC = uncValues.length 
                ? Math.round(uncValues.reduce((a, b) => a + b, 0) / uncValues.length)
                : 0;
            
            document.getElementById('statsUNC').textContent = avgUNC + '%';
        }

        function switchPlatform(platform) {
            currentPlatform = platform;
            document.querySelectorAll('.p-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-platform="${platform}"]`).classList.add('active');
            renderExecutors();
            lucide.createIcons();
        }

        function renderExecutors() {
            const grid = document.getElementById('executorGrid');
            
            // Filter executors by platform
            const filtered = allExecutors.filter(ex => {
                const platform = (ex.platform || '').toLowerCase();
                const extype = (ex.extype || '').toLowerCase();
                
                if (currentPlatform === 'windows') {
                    return platform === 'windows' || extype.includes('wex');
                }
                if (currentPlatform === 'mac') {
                    return platform === 'mac' || extype.includes('mex');
                }
                if (currentPlatform === 'mobile') {
                    return platform.includes('android') || platform.includes('ios') || 
                           extype.includes('android') || extype.includes('ios');
                }
                return false;
            });

            if (filtered.length === 0) {
                grid.innerHTML = `
                    <div style="padding:40px; text-align:center; color:var(--text-muted); background: rgba(255,255,255,0.03); border-radius: 12px;">
                        <i data-lucide="search-x" style="width: 48px; height: 48px; margin-bottom: 16px; opacity: 0.5;"></i>
                        <p>No executors found for ${currentPlatform}.</p>
                    </div>
                `;
                lucide.createIcons();
                return;
            }

            grid.innerHTML = filtered.map(ex => {
                const isWorking = ex.updateStatus === true;
                const statusClass = isWorking ? 'working' : 'down';
                const statusText = isWorking ? 'UPDATED' : 'DOWN';
                
                const badges = [];
                
                // UNC badges
                if (ex.uncStatus && ex.uncPercentage) {
                    badges.push(`<span class="badge unc">UNC ${ex.uncPercentage}%</span>`);
                }
                if (ex.suncPercentage) {
                    badges.push(`<span class="badge unc">sUNC ${ex.suncPercentage}%</span>`);
                }
                
                // Free/Paid badges
                if (ex.free) {
                    const keyText = ex.keysystem ? ' (Key)' : '';
                    badges.push(`<span class="badge free">Free${keyText}</span>`);
                } else {
                    badges.push(`<span class="badge paid">${ex.cost || 'Paid'}</span>`);
                }

                const link = ex.websitelink || ex.discordlink || '#';
                const dateStr = ex.updatedDate || 'Unknown';

                return `
                    <div class="exec-item ${statusClass}" onclick="window.open('${link}', '_blank')">
                        <div class="exec-info">
                            <h3>
                                ${ex.title}
                                <div class="badges">${badges.join('')}</div>
                            </h3>
                            <p style="font-size:13px; color:var(--text-muted)">Version: ${ex.version || 'Unknown'}</p>
                        </div>
                        <div class="exec-meta">
                            <span class="status-pill ${statusClass}">${statusText}</span>
                            <span class="updated-time">${dateStr}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            lucide.createIcons();
        }

        // Initial load
        fetchData();
        
        // Refresh every 60 seconds
        setInterval(fetchData, 60000);
    </script>
</body>
</html>
